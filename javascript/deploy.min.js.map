{"version":3,"sources":["events.js","helpers.js","tablefilter.js","deploy.js"],"names":["events","topics","hOP","hasOwnProperty","subscribe","topic","listener","call","index","push","remove","publish","info","forEach","item","undefined","classNames","classes","i","arguments","length","arg","argType","Array","isArray","apply","key","substr","TableFilter","Arr","onInputEvent","evt","searchBox","target","tables","document","getElementsByClassName","getAttribute","table","tBodies","tbody","rows","filter","row","text","textContent","toLowerCase","val","value","style","display","indexOf","init","className","inputs","input","oninput","prototype","deploy","DeployDropDown","React","createClass","displayName","loadingSub","loadingDoneSub","errorSub","getInitialState","loading","loaded","opened","loadingText","errorText","fetched","last_fetched","componentDidMount","self","this","setState","success","componentWillUnmount","handleClick","e","preventDefault","Q","$","ajax","type","dataType","url","props","project_url","then","waitForFetchToComplete","fetchStatusError","done","fetchData","getFetchStatus","data","status","Deferred","d","reject","promise","href","message","responseText","lastFetchedHandler","time_ago","render","form","deploy-dropdown","state","open","createElement","ErrorMessages","DeployForm","env_name","env_url","LoadingDeployForm","onClick","aria-hidden","EnvironmentName","environmentName","selectedTab","gitData","Tabs","selectHandler","id","action","DeployTabSelector","onSelect","DeployTabs","SecurityToken","selectors","map","tab","DeployTabSelect","active","name","tabs","DeployTab","summary","getInitialSummaryState","options","sha","changes","messages","validationCode","estimatedTime","initialState","OptionChangeHandler","event","checked","SHAChangeHandler","changeHandler","summaryData","findDOMNode","refs","sha_selector","SecurityID","attrname","bind","showOptions","advanced_opts","showVerifyButton","field_type","shaChosen","selector","tab-pane","clearfix","SelectorDropdown","ref","SelectorText","AdvancedOptions","verifyButton","VerifyButton","disabled","htmlFor","field_id","field_label","DeployPlan","select2","field_data","on","width","onChange","loading_changes","deploy_disabled","deployHandler","ok","confirm","strategy","window","location","console","error","canDeploy","isEmpty","obj","showNoChangesMessage","actionTitle","code","deployAction","EstimatedTime","headerClasses","header","inactive","MessageList","SummaryTable","idx","Message","classMap","warning","classname","role","dangerouslySetInnerHTML","__html","summaryLines","Object","keys","from","to","SummaryLine","UnchangedSummaryLine","substring","scope","urls","getElementById"],"mappings":"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","file":"deploy.min.js","sourcesContent":["var events = (function () {\n\n\n\t/**\n\t * A simple pub sub event handler for intercomponent communication\n\t *\n\t * @type {{subscribe, publish}}\n\t */\n\tvar events = (function(){\n\n\t\tvar topics = {};\n\n\t\tvar hOP = topics.hasOwnProperty;\n\n\t\treturn {\n\t\t\tsubscribe: function(topic, listener) {\n\t\t\t\t// Create the topic's object if not yet created\n\t\t\t\tif(!hOP.call(topics, topic)) topics[topic] = [];\n\n\t\t\t\t// Add the listener to queue\n\t\t\t\tvar index = topics[topic].push(listener) -1;\n\n\t\t\t\t// Provide handle back for removal of topic\n\t\t\t\treturn {\n\t\t\t\t\tremove: function() {\n\t\t\t\t\t\tdelete topics[topic][index];\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t},\n\t\t\tpublish: function(topic, info) {\n\t\t\t\t// If the topic doesn't exist, or there's no listeners in queue, just leave\n\t\t\t\tif(!hOP.call(topics, topic)) return;\n\n\t\t\t\t// Cycle through topics queue, fire!\n\t\t\t\ttopics[topic].forEach(function(item) {\n\t\t\t\t\titem(info != undefined ? info : {});\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t})();\n\n\treturn events;\n}());\n","/**\n * Helper class to concatinate strings depeding on a true or false.\n *\n * Example:\n * var classes = classNames({\n *     \"deploy-dropdown\": true,\n *     \"loading\": false,\n *     \"open\": true,\n * });\n *\n * then classes will equal \"deploy-dropdown open\"\n *\n * @returns {string}\n */\nvar classNames = (function () {\n\n\tfunction classNames () {\n\t\tvar classes = '';\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif ('string' === argType || 'number' === argType) {\n\t\t\t\tclasses += ' ' + arg;\n\n\t\t\t} else if (Array.isArray(arg)) {\n\t\t\t\tclasses += ' ' + classNames.apply(null, arg);\n\n\t\t\t} else if ('object' === argType) {\n\t\t\t\tfor (var key in arg) {\n\t\t\t\t\tif (arg.hasOwnProperty(key) && arg[key]) {\n\t\t\t\t\t\tclasses += ' ' + key;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn classes.substr(1);\n\t}\n\treturn classNames;\n}());\n","/**\n * Simple and basic html table filter\n *\n * Requires an <input> with <input class=\"table-filter\" data-table=\"table-to-filter\">\n * the input above refers to a <table class=\"table-to-filter\">\n *\n * Note that the table must have a tbody\n *\n * @type {{init}}\n */\nvar TableFilter = (function(Arr) {\n\n\tvar searchBox;\n\n\tfunction onInputEvent(evt) {\n\t\tsearchBox = evt.target;\n\t\t// find the table(s) to search\n\t\tvar tables = document.getElementsByClassName(searchBox.getAttribute('data-table'));\n\t\t// each table\n\t\tArr.forEach.call(tables, function(table) {\n\t\t\t// each body\n\t\t\tArr.forEach.call(table.tBodies, function(tbody) {\n\t\t\t\tArr.forEach.call(tbody.rows, filter);\n\t\t\t});\n\t\t});\n\t}\n\n\tfunction filter(row) {\n\t\tvar text = row.textContent.toLowerCase(), val = searchBox.value.toLowerCase();\n\t\trow.style.display = text.indexOf(val) === -1 ? 'none' : 'table-row';\n\t}\n\n\treturn {\n\t\tinit: function(className) {\n\t\t\tvar inputs = document.getElementsByClassName(className);\n\t\t\tArr.forEach.call(inputs, function(input) {\n\t\t\t\tinput.oninput = onInputEvent;\n\t\t\t});\n\t\t}\n\t};\n})(Array.prototype);\n","/** @jsx React.DOM */\n\nvar deploy = (function (events, classNames) {\n\t/**\n\t * DeployDropdown\n\t */\n\tvar DeployDropDown = React.createClass({displayName: \"DeployDropDown\",\n\n\t\tloadingSub: null,\n\n\t\tloadingDoneSub: null,\n\n\t\terrorSub: null,\n\n\t\tgetInitialState: function() {\n\t\t\treturn {\n\t\t\t\tloading: false,\n\t\t\t\tloaded: false,\n\t\t\t\topened: false,\n\t\t\t\tloadingText: \"\",\n\t\t\t\terrorText: \"\",\n\t\t\t\tfetched: true,\n\t\t\t\tlast_fetched: \"\"\n\t\t\t};\n\t\t},\n\t\tcomponentDidMount: function() {\n\t\t\tvar self = this;\n\t\t\t// add subscribers\n\t\t\tthis.loadingSub = events.subscribe('loading', function(text) {\n\t\t\t\tself.setState({\n\t\t\t\t\tloading: true,\n\t\t\t\t\topened: false,\n\t\t\t\t\tsuccess: false,\n\t\t\t\t\tloadingText: text\n\t\t\t\t});\n\t\t\t});\n\t\t\tthis.loadingDoneSub = events.subscribe('loading/done', function() {\n\t\t\t\tself.setState({\n\t\t\t\t\tloading: false,\n\t\t\t\t\tloadingText: '',\n\t\t\t\t\tsuccess: true,\n\t\t\t\t\topened: true\n\t\t\t\t});\n\t\t\t});\n\t\t\tthis.errorSub = events.subscribe('error', function(text) {\n\t\t\t\tself.setState({\n\t\t\t\t\terrorText: text,\n\t\t\t\t\tloading: false,\n\t\t\t\t\tloadingText: '',\n\t\t\t\t\tsuccess: false,\n\t\t\t\t\topened: false\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tcomponentWillUnmount: function() {\n\t\t\t// remove subscribers\n\t\t\tthis.loadingSub.remove();\n\t\t\tthis.loadingDoneSub.remove();\n\t\t\tthis.errorSub.remove();\n\t\t},\n\t\thandleClick: function(e) {\n\t\t\te.preventDefault();\n\t\t\tevents.publish('loading', \"Fetching latest code…\");\n\t\t\tthis.setState({\n\t\t\t\tfetched: false\n\t\t\t});\n\t\t\tvar self = this;\n\t\t\tQ($.ajax({\n\t\t\t\ttype: \"POST\",\n\t\t\t\tdataType: 'json',\n\t\t\t\turl: this.props.project_url + '/fetch'\n\t\t\t}))\n\t\t\t\t.then(this.waitForFetchToComplete, this.fetchStatusError)\n\t\t\t\t.then(function() {\n\t\t\t\t\tevents.publish('loading/done');\n\t\t\t\t\tself.setState({\n\t\t\t\t\t\tfetched: true\n\t\t\t\t\t})\n\t\t\t\t}).catch(this.fetchStatusError).done();\n\t\t},\n\t\twaitForFetchToComplete:function (fetchData) {\n\t\t\tvar self = this;\n\t\t\treturn this.getFetchStatus(fetchData).then(function (data) {\n\t\t\t\tif (data.status === \"Complete\") {\n\t\t\t\t\treturn data;\n\t\t\t\t}\n\t\t\t\tif (data.status === \"Failed\") {\n\t\t\t\t\treturn $.Deferred(function (d) {\n\t\t\t\t\t\treturn d.reject(data);\n\t\t\t\t\t}).promise();\n\t\t\t\t}\n\t\t\t\treturn self.waitForFetchToComplete(fetchData);\n\t\t\t});\n\t\t},\n\t\tgetFetchStatus: function (fetchData) {\n\t\t\treturn Q($.ajax({\n\t\t\t\ttype: \"GET\",\n\t\t\t\turl: fetchData.href,\n\t\t\t\tdataType: 'json'\n\t\t\t}));\n\t\t},\n\t\tfetchStatusError: function(data) {\n\t\t\tvar message  = 'Unknown error';\n\t\t\tif(typeof data.responseText !== 'undefined') {\n\t\t\t\tmessage = data.responseText;\n\t\t\t} else if (typeof data.message !== 'undefined') {\n\t\t\t\tmessage = data.message;\n\t\t\t}\n\t\t\tevents.publish('error', message);\n\t\t},\n\t\tlastFetchedHandler: function(time_ago) {\n\t\t\tthis.setState({last_fetched: time_ago});\n\t\t},\n\t\trender: function() {\n\t\t\tvar classes = classNames({\n\t\t\t\t\"deploy-dropdown\": true,\n\t\t\t\t\"loading\": this.state.loading,\n\t\t\t\t\"open\": this.state.opened,\n\t\t\t\t\"success\": this.state.success\n\t\t\t});\n\n\t\t\tvar form;\n\t\t\tif(this.state.errorText !== \"\") {\n\t\t\t\tform = React.createElement(ErrorMessages, {message: this.state.errorText})\n\t\t\t} else if(this.state.fetched) {\n\t\t\t\tform = React.createElement(DeployForm, {env_name: this.props.env_name, data: this.props.data, env_url: this.props.env_url, lastFetchedHandler: this.lastFetchedHandler})\n\t\t\t} else if (this.state.loading) {\n\t\t\t\tform = React.createElement(LoadingDeployForm, null)\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\tReact.createElement(\"div\", null, \n\t\t\t\t\tReact.createElement(\"div\", {className: classes, onClick: this.handleClick}, \n\t\t\t\t\t\tReact.createElement(\"span\", {className: \"status-icon\", \"aria-hidden\": \"true\"}), \n\t\t\t\t\t\tReact.createElement(\"span\", {className: \"time\"}, \"last updated \", this.state.last_fetched), \n\t\t\t\t\t\tReact.createElement(EnvironmentName, {environmentName: this.props.env_name})\n\t\t\t\t\t), \n\t\t\t\t\tform\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t});\n\n\n\tvar LoadingDeployForm = React.createClass({displayName: \"LoadingDeployForm\",\n\t\trender: function() {\n\t\t\treturn (\n\t\t\t\tReact.createElement(\"div\", {className: \"deploy-form-loading\"}, \n\t\t\t\t\tReact.createElement(\"div\", {className: \"icon-holder\"}, \n\t\t\t\t\t\tReact.createElement(\"i\", {className: \"fa fa-cog fa-spin\"}), \n\t\t\t\t\t\tReact.createElement(\"span\", null, \"Fetching latest code…\")\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t});\n\n\tvar ErrorMessages = React.createClass({displayName: \"ErrorMessages\",\n\t\trender: function() {\n\t\t\treturn (\n\t\t\t\tReact.createElement(\"div\", {className: \"deploy-dropdown-errors\"}, \n\t\t\t\t\tthis.props.message\n\t\t\t\t)\n\t\t\t)\n\t\t}\n\t});\n\n\t/**\n\t * EnvironmentName\n\t */\n\tvar EnvironmentName = React.createClass({displayName: \"EnvironmentName\",\n\t\trender: function () {\n\t\t\treturn (\n\t\t\t\tReact.createElement(\"span\", {className: \"environment-name\"}, \n\t\t\t\t\tReact.createElement(\"i\", {className: \"fa fa-rocket\"}, \" \"), \n\t\t\t\t\t\"Deployment options \", React.createElement(\"span\", {className: \"hidden-xs\"}, \"for \", this.props.environmentName)\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t});\n\n\t/**\n\t * DeployForm\n\t */\n\tvar DeployForm = React.createClass({displayName: \"DeployForm\",\n\t\tgetInitialState: function() {\n\t\t\treturn {\n\t\t\t\tselectedTab: 1,\n\t\t\t\tdata: []\n\t\t\t};\n\t\t},\n\t\tcomponentDidMount: function() {\n\t\t\tthis.gitData();\n\t\t},\n\n\t\tgitData: function() {\n\t\t\tvar self = this;\n\t\t\tQ($.ajax({\n\t\t\t\ttype: \"POST\",\n\t\t\t\tdataType: 'json',\n\t\t\t\turl: this.props.env_url + '/git_revisions'\n\t\t\t})).then(function(data) {\n\t\t\t\tself.setState({\n\t\t\t\t\tdata: data.Tabs\n\t\t\t\t});\n\t\t\t\tself.props.lastFetchedHandler(data.last_fetched);\n\t\t\t}, function(data){\n\t\t\t\tevents.publish('error', data);\n\t\t\t});\n\t\t},\n\n\t\tselectHandler: function(id) {\n\t\t\tthis.setState({selectedTab: id});\n\t\t},\n\t\trender: function () {\n\t\t\treturn (\n\t\t\t\tReact.createElement(\"div\", {className: \"deploy-form-outer clearfix\"}, \n\t\t\t\t\tReact.createElement(\"form\", {className: \"form-inline deploy-form\", action: \"POST\", action: \"#\"}, \n\t\t\t\t\t\tReact.createElement(DeployTabSelector, {data: this.state.data, onSelect: this.selectHandler, selectedTab: this.state.selectedTab}), \n\t\t\t\t\t\tReact.createElement(DeployTabs, {env_name: this.props.env_name, data: this.state.data, selectedTab: this.state.selectedTab, env_url: this.props.env_url, SecurityToken: this.state.SecurityToken})\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t});\n\n\t/**\n\t * DeployTabSelector\n\t */\n\tvar DeployTabSelector = React.createClass({displayName: \"DeployTabSelector\",\n\t\trender: function () {\n\t\t\tvar self = this;\n\t\t\tvar selectors = this.props.data.map(function(tab) {\n\t\t\t\treturn (\n\t\t\t\t\tReact.createElement(DeployTabSelect, {key: tab.id, tab: tab, onSelect: self.props.onSelect, selectedTab: self.props.selectedTab})\n\t\t\t\t);\n\t\t\t});\n\t\t\treturn (\n\t\t\t\tReact.createElement(\"ul\", {className: \"SelectionGroup tabbedselectiongroup nolabel\"}, \n\t\t\t\t\tselectors\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t});\n\n\t/**\n\t * DeployTabSelect\n\t */\n\tvar DeployTabSelect = React.createClass({displayName: \"DeployTabSelect\",\n\t\thandleClick: function(e) {\n\t\t\te.preventDefault();\n\t\t\tthis.props.onSelect(this.props.tab.id)\n\t\t},\n\t\trender: function () {\n\t\t\tvar classes = classNames({\n\t\t\t\t\"active\" : (this.props.selectedTab == this.props.tab.id)\n\t\t\t});\n\t\t\treturn (\n\t\t\t\tReact.createElement(\"li\", {className: classes}, \n\t\t\t\t\tReact.createElement(\"a\", {onClick: this.handleClick, href: \"#deploy-tab-\"+this.props.tab.id}, this.props.tab.name)\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\n\t});\n\n\t/**\n\t * DeployTabs\n\t */\n\tvar DeployTabs = React.createClass({displayName: \"DeployTabs\",\n\t\trender: function () {\n\t\t\tvar self = this;\n\t\t\tvar tabs = this.props.data.map(function(tab) {\n\t\t\t\treturn (\n\t\t\t\t\tReact.createElement(DeployTab, {env_name: self.props.env_name, key: tab.id, tab: tab, selectedTab: self.props.selectedTab, env_url: self.props.env_url, SecurityToken: self.props.SecurityToken})\n\t\t\t\t);\n\t\t\t});\n\n\t\t\treturn (\n\t\t\t\tReact.createElement(\"div\", {className: \"tab-content\"}, \n\t\t\t\t\ttabs\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t});\n\n\t/**\n\t * DeployTab\n\t */\n\tvar DeployTab = React.createClass({displayName: \"DeployTab\",\n\t\tgetInitialState: function() {\n\t\t\treturn {\n\t\t\t\tsummary: this.getInitialSummaryState(),\n\t\t\t\toptions: {},\n\t\t\t\tsha: ''\n\t\t\t};\n\t\t},\n\t\tgetInitialSummaryState: function() {\n\t\t\treturn {\n\t\t\t\tchanges: {},\n\t\t\t\tmessages: [],\n\t\t\t\tvalidationCode: '',\n\t\t\t\testimatedTime: null,\n\t\t\t\tinitialState: true\n\t\t\t}\n\t\t},\n\t\tOptionChangeHandler: function(event) {\n\t\t\tvar options = this.state.options;\n\t\t\toptions[event.target.name] = event.target.checked;\n\t\t\tthis.setState({\n\t\t\t\toptions: options\n\t\t\t});\n\t\t},\n\t\tSHAChangeHandler: function(event) {\n\t\t\tthis.setState({\n\t\t\t\tsha: event.target.value\n\t\t\t});\n\t\t},\n\t\tchangeHandler: function(event) {\n\t\t\tevent.preventDefault();\n\n\t\t\tthis.setState({\n\t\t\t\tsummary: this.getInitialSummaryState()\n\t\t\t});\n\n\t\t\tif(event.target.value === \"\") {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tevents.publish('change_loading');\n\n\t\t\tvar summaryData = {\n\t\t\t\tsha: React.findDOMNode(this.refs.sha_selector.refs.sha).value,\n\t\t\t\tSecurityID: this.props.SecurityToken\n\t\t\t};\n\t\t\t// merge the 'advanced' options if they are set\n\t\t\tfor (var attrname in this.state.options) {\n\t\t\t\tif(this.state.options.hasOwnProperty(attrname)) {\n\t\t\t\t\tsummaryData[attrname] = this.state.options[attrname];\n\t\t\t\t}\n\t\t\t}\n\t\t\tQ($.ajax({\n\t\t\t\ttype: \"POST\",\n\t\t\t\tdataType: 'json',\n\t\t\t\turl: this.props.env_url + '/deploy_summary',\n\t\t\t\tdata: summaryData\n\t\t\t})).then(function(data) {\n\t\t\t\tthis.setState({\n\t\t\t\t\tsummary: data\n\t\t\t\t});\n\t\t\t\tevents.publish('change_loading/done');\n\t\t\t}.bind(this), function(){\n\t\t\t\tevents.publish('change_loading/done');\n\t\t\t});\n\t\t},\n\n\t\tshowOptions: function() {\n\t\t\treturn this.props.tab.advanced_opts === 'true';\n\t\t},\n\n\t\tshowVerifyButton: function() {\n\t\t\tif(this.showOptions()) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn this.props.tab.field_type == 'textfield';\n\t\t},\n\n\t\tshaChosen: function() {\n\t\t\treturn (this.state.sha !== '');\n\t\t},\n\n\t\trender: function () {\n\t\t\tvar classes = classNames({\n\t\t\t\t\"tab-pane\": true,\n\t\t\t\t\"clearfix\": true,\n\t\t\t\t\"active\" : (this.props.selectedTab == this.props.tab.id)\n\t\t\t});\n\n\t\t\t// setup the dropdown or the text input for selecting a SHA\n\t\t\tvar selector;\n\t\t\tif (this.props.tab.field_type == 'dropdown') {\n\t\t\t\tvar changeHandler = this.changeHandler;\n\t\t\t\tif(this.showVerifyButton()) { changeHandler = this.SHAChangeHandler }\n\t\t\t\tselector = React.createElement(SelectorDropdown, {ref: \"sha_selector\", tab: this.props.tab, changeHandler: changeHandler})\n\t\t\t} else if (this.props.tab.field_type == 'textfield') {\n\t\t\t\tselector = React.createElement(SelectorText, {ref: \"sha_selector\", tab: this.props.tab, changeHandler: this.SHAChangeHandler})\n\t\t\t}\n\n\t\t\t// 'Advanced' options\n\t\t\tvar options = null;\n\t\t\tif(this.showOptions()) {\n\t\t\t\toptions = React.createElement(AdvancedOptions, {tab: this.props.tab, changeHandler: this.OptionChangeHandler})\n\t\t\t}\n\n\t\t\t// 'The verify button'\n\t\t\tvar verifyButton = null;\n\t\t\tif(this.showVerifyButton()) {\n\t\t\t\tverifyButton = React.createElement(VerifyButton, {disabled: !this.shaChosen(), changeHandler: this.changeHandler})\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\tReact.createElement(\"div\", {id: \"deploy-tab-\"+this.props.tab.id, className: classes}, \n\t\t\t\t\tReact.createElement(\"div\", {className: \"section\"}, \n\t\t\t\t\t\tReact.createElement(\"div\", {htmlFor: this.props.tab.field_id, className: \"header\"}, \n\t\t\t\t\t\t\tReact.createElement(\"span\", {className: \"numberCircle\"}, \"1\"), \" \", this.props.tab.field_label\n\t\t\t\t\t\t), \n\t\t\t\t\t\tselector, \n\t\t\t\t\t\toptions, \n\t\t\t\t\t\tverifyButton\n\t\t\t\t\t), \n\t\t\t\t\tReact.createElement(DeployPlan, {env_name: this.props.env_name, summary: this.state.summary, env_url: this.props.env_url})\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t});\n\n\tvar SelectorDropdown = React.createClass({displayName: \"SelectorDropdown\",\n\t\tcomponentDidMount: function() {\n\t\t\t$(React.findDOMNode(this.refs.sha)).select2({\n\t\t\t\t// Load data into the select2.\n\t\t\t\t// The format supports optgroups, and looks like this:\n\t\t\t\t// [{text: 'optgroup text', children: [{id: '<sha>', text: '<inner text>'}]}]\n\t\t\t\tdata: this.props.tab.field_data\n\t\t\t});\n\n\t\t\t// Trigger handler only needed if there is no explicit button.\n\t\t\tif(this.props.changeHandler) {\n\t\t\t\t$(React.findDOMNode(this.refs.sha)).select2().on(\"change\", this.props.changeHandler);\n\t\t\t}\n\t\t},\n\n\t\trender: function() {\n\t\t\t// From https://select2.github.io/examples.html \"The best way to ensure that Select2 is using a percent based\n\t\t\t// width is to inline the style declaration into the tag\".\n\t\t\tvar style = {width: '100%'};\n\n\t\t\treturn (\n\t\t\t\tReact.createElement(\"div\", null, \n\t\t\t\t\tReact.createElement(\"div\", {className: \"field\"}, \n\t\t\t\t\t\tReact.createElement(\"select\", {\n\t\t\t\t\t\t\tref: \"sha\", \n\t\t\t\t\t\t\tid: this.props.tab.field_id, \n\t\t\t\t\t\t\tname: \"sha\", \n\t\t\t\t\t\t\tclassName: \"dropdown\", \n\t\t\t\t\t        onChange: this.props.changeHandler, \n\t\t\t\t\t\t\tstyle: style}, \n\t\t\t\t\t\t\tReact.createElement(\"option\", {value: \"\"}, \"Select \", this.props.tab.field_id)\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t});\n\n\tvar SelectorText = React.createClass({displayName: \"SelectorText\",\n\t\trender: function() {\n\t\t\treturn(\n\t\t\t\tReact.createElement(\"div\", {className: \"field\"}, \n\t\t\t\t\tReact.createElement(\"input\", {\n\t\t\t\t\t\ttype: \"text\", \n\t\t\t\t\t\tref: \"sha\", \n\t\t\t\t\t\tid: this.props.tab.field_id, \n\t\t\t\t\t\tname: \"sha\", \n\t\t\t\t\t\tclassName: \"text\", \n\t\t\t\t\t\tonChange: this.props.changeHandler}\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t});\n\n\tvar VerifyButton = React.createClass({displayName: \"VerifyButton\",\n\t\trender: function() {\n\t\t\treturn (\n\t\t\t\tReact.createElement(\"div\", {className: \"\"}, \n\t\t\t\t\tReact.createElement(\"button\", {\n\t\t\t\t\t\tdisabled: this.props.disabled, \n\t\t\t\t\t\tvalue: \"Verify deployment\", \n\t\t\t\t\t\tclassName: \"btn btn-default\", \n\t\t\t\t\t\tonClick: this.props.changeHandler}, \n\t\t\t\t\t\t\"Verify deployment\"\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t});\n\n\tvar AdvancedOptions = React.createClass({displayName: \"AdvancedOptions\",\n\t\trender: function () {\n\t\t\treturn (\n\t\t\t\tReact.createElement(\"div\", {className: \"deploy-options\"}, \n\t\t\t\t\tReact.createElement(\"div\", {className: \"fieldcheckbox\"}, \n\t\t\t\t\t\tReact.createElement(\"label\", null, \n\t\t\t\t\t\t\tReact.createElement(\"input\", {\n\t\t\t\t\t\t\t\ttype: \"checkbox\", \n\t\t\t\t\t\t\t\tname: \"force_full\", \n\t\t\t\t\t\t\t\tonChange: this.props.changeHandler}\n\t\t\t\t\t\t\t), \n\t\t\t\t\t\t\t\"Force full deployment\"\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t});\n\n\t/**\n\t * DeployPlan\n\t */\n\tvar DeployPlan = React.createClass({displayName: \"DeployPlan\",\n\t\tloadingSub: null,\n\t\tloadingDoneSub: null,\n\t\tgetInitialState: function() {\n\t\t\treturn {\n\t\t\t\tloading_changes: false,\n\t\t\t\tdeploy_disabled: false\n\t\t\t}\n\t\t},\n\t\tcomponentDidMount: function() {\n\t\t\tvar self = this;\n\t\t\t// register subscribers\n\t\t\tthis.loadingSub = events.subscribe('change_loading', function () {\n\t\t\t\tself.setState({\n\t\t\t\t\tloading_changes: true\n\t\t\t\t});\n\t\t\t});\n\t\t\tthis.loadingDoneSub = events.subscribe('change_loading/done', function () {\n\t\t\t\tself.setState({\n\t\t\t\t\tloading_changes: false\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tdeployHandler: function(event) {\n\t\t\tevent.preventDefault();\n\t\t\tthis.setState({\n\t\t\t\tdeploy_disabled: true\n\t\t\t});\n\n\t\t\tvar message = 'You are about to begin the following deployment:\\n\\n'\n\t\t\t\t+ 'Environment: ' + this.props.env_name + '\\n'\n\t\t\t\t+ 'Revision: ' + this.props.summary.options.sha + \"\\n\\n\"\n\t\t\t\t+ 'Continue?';\n\n\t\t\tvar ok = confirm(message);\n\n\t\t\tif(!ok) {\n\t\t\t\tthis.setState({\n\t\t\t\t\tdeploy_disabled: false\n\t\t\t\t});\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tQ($.ajax({\n\t\t\t\ttype: \"POST\",\n\t\t\t\tdataType: 'json',\n\t\t\t\turl: this.props.env_url + '/start-deploy',\n\t\t\t\tdata: {\n\t\t\t\t\t// Pass the strategy object the user has just signed off back to the backend.\n\t\t\t\t\t'strategy': this.props.summary,\n\t\t\t\t\t'SecurityID': this.props.summary.SecurityID\n\t\t\t\t}\n\t\t\t})).then(function(data) {\n\t\t\t\twindow.location = data.url;\n\t\t\t}, function(data){\n\t\t\t\tconsole.error(data);\n\t\t\t});\n\t\t},\n\t\tcanDeploy: function() {\n\t\t\treturn (this.props.summary.validationCode===\"success\" || this.props.summary.validationCode===\"warning\");\n\t\t},\n\t\tisEmpty: function(obj) {\n\t\t\tfor (var key in obj) {\n\t\t\t\tif (obj.hasOwnProperty(key) && obj[key]) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\t\tshowNoChangesMessage: function() {\n\t\t\tvar summary = this.props.summary;\n\t\t\tif(summary.initialState === true) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif(summary.messages === 'undefined') {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn (this.isEmpty(summary.changes) && summary.messages.length === 0);\n\t\t},\n\t\tactionTitle: function() {\n\t\t\tvar actionTitle = this.props.summary.actionTitle;\n\t\t\tif (typeof actionTitle === 'undefined' || actionTitle === '' ) {\n\t\t\t\treturn 'Make a selection';\n\t\t\t}\n\t\t\treturn this.props.summary.actionTitle;\n\t\t},\n\t\trender: function() {\n\t\t\tvar messages = this.props.summary.messages;\n\t\t\tif (this.showNoChangesMessage()) {\n\t\t\t\tmessages = [{\n\t\t\t\t\ttext: \"There are no changes but you can deploy anyway if you wish.\",\n\t\t\t\t\tcode: \"success\"\n\t\t\t\t}];\n\t\t\t}\n\t\t\tvar deployAction;\n\t\t\tif(this.canDeploy()) {\n\t\t\t\tdeployAction = (\n\t\t\t\t\tReact.createElement(\"div\", {className: \"section\"}, \n\t\t\t\t\t\tReact.createElement(\"button\", {\n\t\t\t\t\t\tvalue: \"Confirm Deployment\", \n\t\t\t\t\t\tclassName: \"deploy\", \n\t\t\t\t\t\tdisabled: this.state.deploy_disabled, \n\t\t\t\t\t\tonClick: this.deployHandler}, \n\t\t\t\t\t\tthis.actionTitle(), React.createElement(\"br\", null), \n\t\t\t\t\t\t\tReact.createElement(EstimatedTime, {estimatedTime: this.props.summary.estimatedTime})\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tvar headerClasses = classNames({\n\t\t\t\theader: true,\n\t\t\t\tinactive: !this.canDeploy(),\n\t\t\t\tloading: this.state.loading_changes\n\t\t\t});\n\n\t\t\treturn(\n\t\t\t\tReact.createElement(\"div\", null, \n\t\t\t\t\tReact.createElement(\"div\", {className: \"section\"}, \n\t\t\t\t\t\tReact.createElement(\"div\", {className: headerClasses}, \n\t\t\t\t\t\t\tReact.createElement(\"span\", {className: \"status-icon\"}), \n\t\t\t\t\t\t\tReact.createElement(\"span\", {className: \"numberCircle\"}, \"2\"), \" Review changes\"\n\t\t\t\t\t\t), \n\t\t\t\t\t\tReact.createElement(MessageList, {messages: messages}), \n\t\t\t\t\t\tReact.createElement(SummaryTable, {changes: this.props.summary.changes})\n\t\t\t\t\t), \n\t\t\t\t\tdeployAction\n\t\t\t\t)\n\t\t\t)\n\t\t}\n\t});\n\n\t/**\n\t * EstimatedTime\n\t */\n\tvar EstimatedTime = React.createClass({displayName: \"EstimatedTime\",\n\t\trender: function() {\n\t\t\tif (this.props.estimatedTime && this.props.estimatedTime>0) {\n\t\t\t\treturn (\n\t\t\t\t\tReact.createElement(\"small\", null, \"Estimated \", this.props.estimatedTime, \" min\")\n\t\t\t\t);\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\t});\n\n\tvar MessageList = React.createClass({displayName: \"MessageList\",\n\t\trender: function() {\n\t\t\tif(this.props.messages.length < 1) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tif(typeof this.props.messages === 'undefined') {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tvar idx = 0;\n\t\t\tvar messages = this.props.messages.map(function(message) {\n\t\t\t\tidx++;\n\t\t\t\treturn React.createElement(Message, {key: idx, message: message})\n\t\t\t});\n\t\t\treturn (\n\t\t\t\tReact.createElement(\"div\", null, \n\t\t\t\t\tmessages\n\t\t\t\t)\n\t\t\t)\n\t\t}\n\t});\n\n\tvar Message = React.createClass({displayName: \"Message\",\n\t\trender: function() {\n\t\t\tvar classMap = {\n\t\t\t\t'error': 'alert alert-danger',\n\t\t\t\t'warning': 'alert alert-warning',\n\t\t\t\t'success': 'alert alert-info'\n\t\t\t};\n\t\t\tvar classname=classMap[this.props.message.code];\n\t\t\treturn (\n\t\t\t\tReact.createElement(\"div\", {className: classname, role: \"alert\", \n\t\t\t\t\tdangerouslySetInnerHTML: {__html: this.props.message.text}})\n\t\t\t)\n\t\t}\n\t});\n\n\t/**\n\t * @jsx React.DOM\n\t */\n\tvar SummaryTable = React.createClass({displayName: \"SummaryTable\",\n\t\tisEmpty: function(obj) {\n\t\t\tfor (var key in obj) {\n\t\t\t\tif (obj.hasOwnProperty(key) && obj[key]) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\t\trender: function() {\n\t\t\tvar changes = this.props.changes;\n\t\t\tif(this.isEmpty(changes)) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tvar idx = 0;\n\t\t\tvar summaryLines = Object.keys(changes).map(function(key) {\n\t\t\t\tidx++;\n\t\t\t\tif(changes[key].from != changes[key].to) {\n\t\t\t\t\treturn React.createElement(SummaryLine, {key: idx, name: key, from: changes[key].from, to: changes[key].to})\n\t\t\t\t} else {\n\t\t\t\t\treturn React.createElement(UnchangedSummaryLine, {key: idx, name: key, value: changes[key].from})\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn (\n\t\t\t\tReact.createElement(\"table\", {className: \"table table-striped table-hover\"}, \n\t\t\t\t\tReact.createElement(\"thead\", null, \n\t\t\t\t\t\tReact.createElement(\"tr\", null, \n\t\t\t\t\t\t\tReact.createElement(\"th\", null, \" \"), \n\t\t\t\t\t\t\tReact.createElement(\"th\", null, \"From\"), \n\t\t\t\t\t\t\tReact.createElement(\"th\", null, \"To\")\n\t\t\t\t\t\t)\n\t\t\t\t\t), \n\t\t\t\t\tReact.createElement(\"tbody\", null, \n\t\t\t\t\t\tsummaryLines\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t});\n\n\t/**\n\t * SummaryLine\n\t */\n\tvar SummaryLine = React.createClass({displayName: \"SummaryLine\",\n\t\trender: function() {\n\t\t\tvar from = this.props.from,\n\t\t\t\tto = this.props.to;\n\n\t\t\t// naive git sha detection\n\t\t\tif(from !== null && from.length === 40) {\n\t\t\t\tfrom = from.substring(0,7);\n\t\t\t}\n\t\t\t// naive git sha detection\n\t\t\tif(to !== null && to.length === 40) {\n\t\t\t\tto = to.substring(0,7);\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\tReact.createElement(\"tr\", null, \n\t\t\t\t\tReact.createElement(\"th\", {scope: \"row\"}, this.props.name), \n\t\t\t\t\tReact.createElement(\"td\", null, from), \n\t\t\t\t\tReact.createElement(\"td\", null, to)\n\t\t\t\t)\n\t\t\t)\n\t\t}\n\t});\n\n\tvar UnchangedSummaryLine = React.createClass({displayName: \"UnchangedSummaryLine\",\n\t\trender: function() {\n\t\t\tvar from = this.props.value;\n\t\t\t// naive git sha detection\n\t\t\tif(from !== null && from.length === 40) {\n\t\t\t\tfrom = from.substring(0,7);\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\tReact.createElement(\"tr\", null, \n\t\t\t\t\tReact.createElement(\"th\", {scope: \"row\"}, this.props.name), \n\t\t\t\t\tReact.createElement(\"td\", null, from), \n\t\t\t\t\tReact.createElement(\"td\", null, \n\t\t\t\t\t\tReact.createElement(\"span\", {className: \"label label-success\"}, \"Unchanged\")\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t});\n\n\treturn {\n\t\trender: function(urls) {\n\t\t\tReact.render(\n\t\t\t\tReact.createElement(DeployDropDown, {\n\t\t\t\t\tproject_url: urls.project_url, \n\t\t\t\t\tenv_url: urls.env_url, \n\t\t\t\t\tenv_name: urls.env_name}),\n\t\t\t\tdocument.getElementById('deploy_form')\n\t\t\t);\n\t\t}\n\t}\n}(events, classNames));\n\nif (typeof urls != 'undefined') {\n\tdeploy.render(urls);\n}\n"],"sourceRoot":"/source/"}